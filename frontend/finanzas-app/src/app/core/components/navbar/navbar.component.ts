// frontend/finanzas-app/src/app/core/components/navbar/navbar.component.ts
import { Component } from '@angular/core';
import { RouterModule, Router } from '@angular/router';
import { CommonModule } from '@angular/common';
import { ThemeService } from '../../services/theme.service';


@Component({
  selector: 'app-navbar',
  standalone: true,
  imports: [RouterModule, CommonModule],
  templateUrl: './navbar.component.html',
  styleUrls: ['./navbar.component.scss']
})
export class NavbarComponent {
  isOpen = false;
  currentTheme = 'light';
  
  // ← DIRECTAMENTE EN BASE64 - SIN SANITIZER, SIN URLs
  logoLightBase64 = 'data:image/png;base64,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'; // tu base64 completo
  logoDarkBase64 = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAABGOSURBVHhe7Z3Zc1RFG4d7JkFFUVZlTwIBFxQQVNyVvVxBKct/w38Aq75rLywvvPDKG0u5s0qrkH1XEXFBAbHYSQBBWUUFJZn5+ulM43z5kiYh50xOn/yeqkOSSUhm5pznvG9vbxcaGhrKRgjRJcXKRyFEF0gQIQJIECECSBAhAkgQIQJIECECSBAhAkgQIQJIECECSBAhAkgQIQJIECECSBAhAkgQIQJIECECSBAhAkS/YGpkoWAK9mivfO2N50VxFNxXIi38e+zf51LlY509yuWyOWuPmIlekOHFotnc3Gyu2hPBCSnaU1Uo2Y/FevtYyRQLcZ+grFMqF8ygQtGUSm2mXCxYQcruhjXIHnMPHTLnS16ZOIlekBEI0jTZtFXuVEV7YsrtiFFv2q0c8iNdrB+mzv5TKreZQp0VpXIe6hHk6GFzToL0L8PsXWv95HEugkA9J8ueFCKIvaepkZUyXP71NmoTQYr2ZtVWuSMRQRYePmku2GgeM7lIsTbaCHK1kv0iSNk2SIr1dTaqlFy4F+lBWltPitXWbiOI+VcQe2uabyOIUqx+ZqQVZFPDhCpB6jpSLASxJ6dQjPsOlnXKpYKpt+egQxAiSEd3CYLMazluzkqQ/mUYEaRx0jVBOhrpJMYd+fC//VsiDcqmzrX7jL0ple3NiEY6uAhy7IhNseIWJPoUnQSqWLARg4/2qEMQe5qKVgzk8I/rSOfoeI95r0vuvb/2PXtO8pDc8lpyiNKq2pPP9zynggiRDBJEiAASRIgAEkSIABJEiAASRIgAuRDETZQrtruPhs8LZVNut593fFdHqod9y+17zXvOe/8/5yIH5GI274aJTR1TrZmkyMiuG7ayL8s+Zs9U5SdFKlTeY/+elxg4tOeEJQcLWo9qNm9/w1STdU3jTakiSL0VhBHddnuyeGF5GM3NMv499u95W0WQohVk0dET0U81yUcEaWwwpTp7gtrb3WTF6gjCbFORHm62dFUEYbJiXZ09B+02ghxrUQTpb0YU68zGiZNN2Z4UBOFEcZRZF2LPHadNpAdqMGGaNkhHilV2ghTsuZjfyoKpuCeLRi/IUBtB1k8dbwWxEaSNNgiTFbmpEUHsiSpLkDQpF4r2zbY3JhtJuJCcIPX2LNgIsvDACXNREaR/GUWIr5wcDuTg8F+rHztduPw7v+f+axvGzZnIU9zoBREiTXSDFSKABBEigAQRIoAEESKABBEigAQRIoAEESKABBEigAQRIoAEESKABBEigAQRIoAEESKABBEigAQRIkB060FYA+3WPBez6TbLfjlEPohOkHHjxplly5aZe++914mSNVpbW82GDRvMjh07Ko+ImIlOEMRYvny5mT59uqmvr688mh1OnjxpVqxYYd5///3KIyJmohPk/vvvN2+99ZYTJWuCUGLot99+c4K8/fbblUdFzKiRLkQACSJEAAkiRAAJIkQACSJEAAkiRAAJIkQACSJEAAkiRAAJIkQACSJEAAkiRAAJIkQACSJEAAkiRAAJIkQACSJEAAkiRAAJIkQACSJEAAkiRAAJIkQACSJEAAkiRAAJIkQACSJEAAkiRAAJIkQACSJEAFV3T5C+VHcfMmSImTlzpmlubja33nqr2yCIgw2Drgd/t1QqmatXr7rtF/bt22cOHz5c+a7oCxIkQXojyF133eVeS1NTkxPilltucXLwum6//fb/ESQkCX8TEKStrc2cPn3a7N2714nipbl48aI5cOCA2bVrl3a/6iUSJEGuJ8jYsWPNtGnTzOjRo82oUaPca+F1ED3YLYvX46PHjYIkf/31l5OjWhCiyu7du82ZM2fMkSNHzE8//eS+J8JIkATpTpAJEya4SIEcTzzxhJk0aZKLEjfddJO57bbb/i9C9CStCuGjigdR/vjjD/P333+bc+fOmT179rhocvbsWfPrr7+6r69cuVL5aVFN3dChQ/9T+TwKSE0WLVrk7sB9udOmBXdvLrjt27c7KWbMmGGeffZZs2TJEvdxypQp7rkTKRDEp1DVR1/p/Pt4n26++WYn44gRI5yws2fPdgey+hTvwoULiiqdkCAJgyDHjx93kWTOnDnmlVdecWLQvhg5cmSXUtQC/7e8LKR1w4cPN3feeae55557jM0kzODBg933//zzT/PPP/9U/ufARoIkDGkMqR/Rg14pIghtDsTg+dZSiu6oloXIMWzYMCcKaev48eOdHDT2JYkESRzyfe7ECNLY2GjuuOOOa2Jkkc6i2OvBRRaEpsfr8uXLAzrtkiAJwwWHIL4RnsXn2BVe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'; // tu base64 completo
  
  logoPath = this.logoLightBase64; // valor inicial

  constructor(private themeService: ThemeService, private router: Router) {
    // Suscribirse al tema para actualizar el logo
    this.themeService.theme$.subscribe(theme => {
      this.currentTheme = theme;
      this.logoPath = theme === 'dark'
        ? this.logoDarkBase64
        : this.logoLightBase64;
    });
  }

  toggleMenu() {
    console.log('Toggle menu clicked');
    this.isOpen = !this.isOpen;
  }

  closeMenu() {
    this.isOpen = false;
  }

  setTheme(theme: string) {
    console.log('NavbarComponent calls setTheme with', theme);
    this.themeService.setTheme(theme);
    this.closeMenu();
  }

  navigateTo(route: string) {
    this.router.navigate([route]);
    this.closeMenu();
  }

  toggleTheme() {
    const newTheme = this.currentTheme === 'light' ? 'dark' : 'light';
    this.setTheme(newTheme);
  }

  // --- NUEVOS MÉTODOS PARA NAVEGACIÓN A REACT ---
  goToDashboard() {
    window.location.href = '/dashboard';
    this.closeMenu();
  }

  goToUsers() {
    window.location.href = '/dashboard?tab=configuracion';
    this.closeMenu();
  }

  goToCompoundInterest() {
    window.location.href = '/dashboard?tab=calculadora';
    this.closeMenu();
  }

  goToMortgage() {
    window.location.href = '/dashboard?tab=mortgage';
    this.closeMenu();
  }

  goToBasicCalculator() {
    window.location.href = '/dashboard?tab=basic-calculator';
    this.closeMenu();
  }
  
  logout() {
    if (window.AuthBridge?.clearAuth) {
      window.AuthBridge.clearAuth();
    }
    window.location.href = '/login';
    this.closeMenu();
  }
}